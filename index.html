<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>E Series of preferred Values</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<h1>E Series of preferred Values</h1>
	<div class="value">
		<span>1.0</span>
		<span>1.2</span>
		<span>1.5</span>
		<span>1.8</span>
		<span>2.2</span>
		<span>2.7</span>
		<span>3.3</span>
		<span>3.9</span>
		<span>4.7</span>
		<span>5.6</span>
		<span>6.8</span>
		<span>8.2</span>
	</div>
	<div>Ratio: <span id="text">0</span></div>
	<div id="result">0</div>
</body>
<script>
	// "Input" Element
	let txt = document.getElementById("text");
	// Current input number
	let number = 0;
	// Number of decimals
	let periodCounter = 0;

	document.addEventListener("keydown", (ev) => {
		let code = ev.keyCode;
		switch(code) {
			case 8: // Backspace
				txt.innerText = txt.innerText.slice(0, txt.innerText.length-1);
				if (periodCounter == 0) {
					number /= 10;
					number -= number % 1;
				} else 
				if (periodCounter == 2) {
					let upper = number - (number % 1);
					let lower = ((number % 1)*Math.pow(10, periodCounter-2));
					
					number = upper + (lower - lower%1)*Math.pow(10, -periodCounter+2);
					periodCounter--;
					periodCounter--;
					txt.innerText = txt.innerText.slice(0, txt.innerText.length-1);
				} else {
					let upper = number - (number % 1);
					let lower = ((number % 1)*Math.pow(10, periodCounter-2));
					
					number = upper + (lower - lower%1)*Math.pow(10, -periodCounter+2);
					periodCounter--;
				}
				break;
			case 27: // Escape
				txt.innerText = "0";
				number = 0;
				periodCounter = 0;
			default: // The rest
				// console.log(ev.key, ev.keyCode);
				if (code >= 48 && code <= 57) { // Number
					if (txt.innerText == "0") txt.innerText = "";
					txt.innerText += ev.key;
					if (periodCounter != 0) {
						number = number + (code - 48)*Math.pow(10, -periodCounter);
						periodCounter++;
					}
				} else if ((code == 190) && periodCounter == 0) { // Comma
					periodCounter++;
					txt.innerText += ev.key;
				}
		}
		if (txt.innerText != "") number = parseFloat(txt.innerText);
		else {
			number = 0;
			txt.innerText = 0;
		}
		document.getElementById("result").innerText = number;

	});
</script>
</html>